---
title: "Как правильно версионировать проект? Семантическое версионирование"
date: "2021-02-02"
tags: ["Web"]
active: "true"
---

Если вы используете сторонние модули, то наверняка встречали, что у них присутствует версия.
И очень часто она выглядит следующим образом.

```javascript
version: 1.0.0
``` 

Разберемся на практике, что значат эти цифры и как правильно версионировать проект.

## Почему это важно?

Если мы говорим о разработке ПО, не важно будь то мобильное приложение, веб приложение, backend сервис,
мы часто используем API смежных сервисов или готовые модули и библиотеку,
которые  реализуют необходимую для нас функциональность.

С помощью введения системы версионирования на проекте, легче сообщать о своих намерениях пользователям вашего модуля.

Им достаточно взглянуть на версию вашего модуля и понять, нужно ли будет вносить изменения в свой код,
после обновления вашей библиотеки или можно спокойно повышать версию, не боясь что это сломает реализацию.

В этом может помочь **"Семантическое версионирование"**

## Что такое семантическое версионирование?

```1.0.0``` - первая версия вашего модуля.

Где:
```major.minor.patch```

Что это значит?

### Major
Если сделаны обратно несовместимые изменения.
И тем, кто использует ваш API, придется вносить изменения к себе в код, после обновления вашей библиотеки.

Иногда это называют мажорным обновлением.

### Minor
Добавление новой функциональности, без нарушения обратной совместимости.

Иногда это называют минорным обновлением.

### Patch
Это как правило исправление существующей функциональности, без нарушения логики работы кода. Например исправление багов или улучшение оптимизации и рефакторинг.


## Рассмотрим на примере

Рассмотрим поднятие версии на примере внесения изменений в код небольшого модуля.

Допустим вы написали простой модуль, который реализует методы для работы с математическими операциями
и <a href="https://chillcoding.dev/create-own-npm-package" target="_blank">залили его в пакетный менеджер npm.</a>

Пример нашего кода. Мы реализовали модуль с нуля и написали две функции сложения и вычитания двух чисел.

```javascript
// версия 1.0.0

function sum(a, b) {
    return a + b;
}

function subtract(a, b) {
  return a - b;
}

module.exports = {
  sum: sum,
  subtract: subtract,
}
```

Спустя время мы решили расширить функциональность нашего модуля и добавили еще несколько функций.
Теперь наш модуль предоставляет возможность деления и умножения чисел.
И мы смело повышаем минорную версию нашего модуля и радостно пишем в release notes о добавлении новых возможностей.

```javascript
// версия 1.1.0

function sum(a, b) {
    return a + b;
}

function subtract(a, b) {
  return a - b;
}

function multiply(a, b) {
    return a * b;
}

function divide(a, b) {
  return a / b;
}


module.exports = {
  sum: sum,
  subtract: subtract,
  multiply: multiply,
  divide: divide,
}
```

Но тут мы решили, что метод суммы должен работать не так. И теперь он будет принимать массив элементов, которые нужно сложить.
При этом сделаем это без обратной совместимости.
Это значит, что те приложения, которые используют наш модуль, сломаются.

```javascript
// версия 2.1.0

function sum(arr) {
    return arr.reduce((elem, sum) => sum + elem , 0);
}

// Другие функции
...


module.exports = {
  sum: sum,
  ...,
}
```

Для этого мы должны повысить мажорную версию и сообщить об этих изменениях в release notes.
Теперь разработчики приложений будут знать, что перед тем, как обновить наш модуль, необходимо предусмотреть это у себя в приложении.

<a href="https://semver.org/lang/ru/" target="_blank">Вот тут официальная документация SemVer.</a>
